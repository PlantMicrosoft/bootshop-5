<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBatisç”¨æˆ·æ³¨å†Œ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .error { color: red; font-size: 12px; }
        .required { color: red; }
        button { background: #007bff; color: white; padding: 12px 30px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .form-row { display: flex; gap: 20px; }
        .form-row .form-group { flex: 1; }
    </style>
</head>
<body>
<div class="container">
    <h1 th:text="${isEdit} ? 'âœï¸ ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯' : 'ğŸš€ MyBatisç”¨æˆ·æ³¨å†Œ'">ğŸš€ MyBatisç”¨æˆ·æ³¨å†Œ</h1>
    
    <div th:if="${errorMessage}" style="color: red; margin-bottom: 20px;">
        <strong th:text="${errorMessage}"></strong>
    </div>

    <form th:object="${user}" 
          th:action="${isEdit} ? @{/mybatis-users/{id}/edit(id=${user.id})} : @{/mybatis-users/register}" 
          method="post">
        <input type="hidden" th:field="*{id}" />

        <h2>ğŸ“‹ è´¦æˆ·ä¿¡æ¯</h2>
        
        <div class="form-group">
            <label>ç”¨æˆ·å <span class="required">*</span></label>
            <input type="text" th:field="*{username}" 
                   th:readonly="${isEdit}"
                   placeholder="è¯·è¾“å…¥3-20ä¸ªå­—ç¬¦çš„ç”¨æˆ·å" />
            <span class="error" th:errors="*{username}"></span>
            <small th:if="${isEdit}" style="color: #666;">ç”¨æˆ·åä¸å¯ä¿®æ”¹</small>
        </div>

        <div class="form-group" th:unless="${isEdit}">
            <label>å¯†ç  <span class="required">*</span></label>
            <input type="password" th:field="*{password}" placeholder="è¯·è¾“å…¥è‡³å°‘6ä¸ªå­—ç¬¦çš„å¯†ç " />
            <span class="error" th:errors="*{password}"></span>
        </div>

        <div class="form-group">
            <label>é‚®ç®±åœ°å€ <span class="required">*</span></label>
            <input type="email" th:field="*{email}" placeholder="example@email.com" />
            <span class="error" th:errors="*{email}"></span>
        </div>

        <div class="form-group">
            <label>æ‰‹æœºå·ç  <span class="required">*</span></label>
            <input type="tel" th:field="*{phone}" placeholder="è¯·è¾“å…¥11ä½æ‰‹æœºå·ç " />
            <span class="error" th:errors="*{phone}"></span>
        </div>

        <h2>ğŸ‘¤ ä¸ªäººä¿¡æ¯</h2>

        <div class="form-group">
            <label>çœŸå®å§“å <span class="required">*</span></label>
            <input type="text" th:field="*{realName}" placeholder="è¯·è¾“å…¥æ‚¨çš„çœŸå®å§“å" />
            <span class="error" th:errors="*{realName}"></span>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>æ€§åˆ« <span class="required">*</span></label>
                <select th:field="*{gender}">
                    <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                    <option th:each="gender : ${genderOptions}"
                            th:value="${gender.key}"
                            th:text="${gender.value}"></option>
                </select>
                <span class="error" th:errors="*{gender}"></span>
            </div>

            <div class="form-group">
                <label>å¹´é¾„ <span class="required">*</span></label>
                <input type="number" th:field="*{age}" min="18" max="120" placeholder="18" />
                <span class="error" th:errors="*{age}"></span>
            </div>
        </div>

        <div class="form-group">
            <label>å‡ºç”Ÿæ—¥æœŸ</label>
            <input type="date" th:field="*{birthDate}" />
            <span class="error" th:errors="*{birthDate}"></span>
        </div>

        <h2>ğŸŒ åœ°å€ä¿¡æ¯</h2>

        <div class="form-row">
            <div class="form-group">
                <label>å›½å®¶ <span class="required">*</span></label>
                <select th:field="*{country}">
                    <option value="">è¯·é€‰æ‹©å›½å®¶</option>
                    <option th:each="country : ${countries}"
                            th:value="${country}"
                            th:text="${country}"></option>
                </select>
                <span class="error" th:errors="*{country}"></span>
            </div>

            <div class="form-group">
                <label>åŸå¸‚ <span class="required">*</span></label>
                <select th:field="*{city}">
                    <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
                    <option th:each="city : ${cities}"
                            th:value="${city.key}"
                            th:text="${city.value}"></option>
                </select>
                <span class="error" th:errors="*{city}"></span>
            </div>
        </div>

        <div class="form-group">
            <label>ä¸ªäººç®€ä»‹</label>
            <textarea th:field="*{bio}" placeholder="ç®€å•ä»‹ç»ä¸€ä¸‹æ‚¨è‡ªå·±å§...ï¼ˆé€‰å¡«ï¼‰"></textarea>
        </div>

        <div class="form-group">
            <label>å…´è¶£çˆ±å¥½</label>
            <select th:field="*{hobbies}" multiple>
                <option th:each="hobby : ${hobbyOptions}"
                        th:value="${hobby}"
                        th:text="${hobby}"></option>
            </select>
        </div>

        <h2>ğŸ“§ è®¢é˜…è®¾ç½®</h2>

        <div class="form-group">
            <label>
                <input type="checkbox" th:field="*{newsletterSubscription}" />
                è®¢é˜…æˆ‘ä»¬çš„ç”µå­é‚®ä»¶é€šè®¯
            </label>
        </div>

        <!-- æ¡æ¬¾åŒæ„å¤é€‰æ¡† - ä»…åœ¨æ³¨å†Œæ—¶æ˜¾ç¤º -->
        <div class="form-group" th:unless="${isEdit}">
            <label>
                <input type="checkbox" th:field="*{termsAccepted}" />
                æˆ‘å·²é˜…è¯»å¹¶åŒæ„æœåŠ¡æ¡æ¬¾å’Œéšç§æ”¿ç­– <span class="required">*</span>
            </label>
            <span class="error" th:errors="*{termsAccepted}"></span>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button type="submit" th:text="${isEdit} ? 'ğŸ’¾ ä¿å­˜ä¿®æ”¹' : 'ğŸš€ ç«‹å³æ³¨å†Œ'">ğŸš€ ç«‹å³æ³¨å†Œ</button>
            <button type="reset" style="background: #6c757d; margin-left: 10px;">ğŸ”„ é‡ç½®è¡¨å•</button>
            <a th:if="${isEdit}" th:href="@{/mybatis-users/{id}(id=${user.id})}" 
               style="display: inline-block; padding: 12px 30px; background: #6c757d; color: white; text-decoration: none; border-radius: 5px; margin-left: 10px;">
               â†©ï¸ è¿”å›è¯¦æƒ…
            </a>
        </div>
    </form>
</div>
</body>
</html>